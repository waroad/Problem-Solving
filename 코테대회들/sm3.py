n=int(input())
arr=[[int(x) for x in input().split()] for _ in range(4)]
possible=[[[0,0],[0,1],[1,0],[1,1]],[[0,0],[0,1],[1,0],[2,0]],[[0,0],[0,1],[1,0],[0,2]],[[0,0],[0,1],[0,2],[0,3]],
          [[0,0],[1,0],[2,0],[3,0]],[[0,0],[0,1],[0,2],[1,1]],[[0,0],[1,0],[2,0],[1,1]],[[0,0],[1,0],[2,0],[2,1]],
          [[0,0],[0,1],[1,1],[2,1]],[[0,0],[1,0],[1,1],[1,2]],[[0,0],[0,1],[0,2],[1,2]],[[0,0],[0,1],[1,2],[1,1]],
          [[0,0],[2,1],[1,0],[1,1]],[[0,2],[0,1],[1,0],[1,1]],[[2,0],[0,1],[1,0],[1,1]],[[1,2],[0,1],[1,0],[1,1]],
          [[2,1],[0,1],[1,0],[1,1]],[[2,0],[0,1],[2,1],[1,1]],[[0,2],[1,2],[1,0],[1,1]]]
ans=0


def find(a,b,c):
    global ans
    if c>ans:
        ans=c
    for k in possible:
        try:
            tmp=1
            cc=0
            for j in range(4):
                if arr[a+k[j][0]][b+k[j][1]]<=0:
                    cc=1
                    break
                tmp*=arr[a+k[j][0]][b+k[j][1]]
            if cc:
                continue
            c+=tmp
            for j in range(4):
                arr[a+k[j][0]][b+k[j][1]]*=-1
            if b+1 < n:
                find(a, b+1, c)
            elif a+1 < 4:
                find(a+1,0,c)
            for j in range(4):
                arr[a+k[j][0]][b+k[j][1]]*=-1
            c-=tmp
        except:
            continue
    if b + 1 < n:
        find(a, b + 1, c)
    elif a + 1 < 4:
        find(a + 1, 0, c)


find(0,0,0)
print(ans)